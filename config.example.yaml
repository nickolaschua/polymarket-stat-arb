# Polymarket Stat Arb - Configuration
# Copy to config.yaml and fill in your values

polymarket:
  clob_host: "https://clob.polymarket.com"
  gamma_host: "https://gamma-api.polymarket.com"
  data_host: "https://data-api.polymarket.com"
  ws_host: "wss://ws-subscriptions-clob.polymarket.com"
  chain_id: 137  # Polygon mainnet

wallet:
  # Use environment variable for private key (NEVER hardcode!)
  private_key_env: "POLY_PRIVATE_KEY"
  # Your wallet address that holds USDC
  funder_address: ""
  # Signature type: 0=EOA, 1=Magic/Email, 2=Gnosis Safe
  signature_type: 0

risk:
  max_daily_loss_usd: 50       # Trip circuit breaker after this daily loss
  max_drawdown_pct: 20         # Trip after this % drawdown from peak
  max_consecutive_losses: 5    # Trip after N consecutive losing trades
  circuit_breaker_state_file: "data/circuit_breaker_state.json"

strategy:
  # Arbitrage detection
  min_spread_pct: 2.0          # Minimum spread to consider (%)
  min_liquidity_usd: 100       # Minimum orderbook depth
  
  # Position sizing
  max_position_usd: 100        # Max per position
  max_total_exposure_usd: 500  # Max total capital deployed
  kelly_fraction: 0.25         # Fraction of Kelly criterion to use
  
  # Execution
  slippage_tolerance_pct: 0.5  # Max acceptable slippage
  order_timeout_sec: 30        # Cancel unfilled orders after
  
  # Combinatorial arbitrage
  enable_combinatorial: true
  similarity_threshold: 0.8    # For vector search grouping

scanner:
  # Polling intervals (seconds)
  market_refresh_interval: 60
  price_check_interval: 5
  websocket_reconnect_delay: 5
  
  # Filters
  min_volume_24h: 1000         # Ignore low-volume markets
  max_days_to_resolution: 30   # Focus on near-term events

database:
  url: "postgresql://polymarket:polymarket_dev@localhost:5432/polymarket"
  min_pool_size: 2               # Minimum connections in asyncpg pool
  max_pool_size: 10              # Maximum connections in asyncpg pool
  max_inactive_connection_lifetime: 300.0  # Seconds before idle connection is closed
  command_timeout: 60            # Default query timeout in seconds

collector:
  price_interval_sec: 60         # How often to snapshot prices
  orderbook_interval_sec: 300    # How often to snapshot orderbooks
  metadata_interval_sec: 300     # How often to refresh market metadata
  trade_buffer_size: 1000        # Buffer size for trade ingestion
  max_markets: 10000             # Maximum number of markets to track

alerts:
  telegram:
    enabled: true
    bot_token_env: "TELEGRAM_BOT_TOKEN"
    chat_id: ""
  
  # Alert thresholds
  notify_on_opportunity: true
  notify_on_trade: true
  notify_min_spread_pct: 3.0   # Only alert spreads > 3%

logging:
  level: "INFO"
  file: "logs/bot.log"
  max_size_mb: 10
  backup_count: 5

# Paper trading mode (no real trades)
paper_trading: true
